(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[811],{8785:function(t,e,a){Promise.resolve().then(a.bind(a,6457))},2752:function(t,e,a){"use strict";a.d(e,{Z:function(){return s}});/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(4063).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},811:function(t,e,a){"use strict";a.d(e,{Z:function(){return s}});/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(4063).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},290:function(t,e,a){"use strict";a.d(e,{Z:function(){return s}});/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(4063).Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},6457:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return N}});var s=a(1668),n=a(4119),r=a(1565),i=a(1519),o=a(2522),c=a(7306),l=a(2851),d=a(6293),h=a(8092),x=a(2752),m=a(566),u=a(290),y=a(4063);/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let p=(0,y.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var f=a(725),g=a(811);/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let j=(0,y.Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var w=a(9882);let v={completed:{icon:x.Z,class:"status-success"},pending:{icon:m.Z,class:"status-pending"},failed:{icon:u.Z,class:"status-error"}};function N(){let[t,e]=(0,n.useState)(!1),[a,x]=(0,n.useState)(""),[u,y]=(0,n.useState)("all"),{walletState:N}=(0,d.X$)(),{transactions:b,clearHistory:k,fetchTransactions:C,isLoading:T}=(0,h.Y)();(0,n.useEffect)(()=>{C(N.address||void 0)},[N.address,C]);let I=b.filter(t=>{let e=t.fromToken.toLowerCase().includes(a.toLowerCase())||t.toToken.toLowerCase().includes(a.toLowerCase())||t.txHash.toLowerCase().includes(a.toLowerCase()),s="all"===u||t.status===u;return e&&s});return(0,s.jsxs)("div",{className:"min-h-screen flex flex-col relative",children:[(0,s.jsx)("div",{className:"scanline-overlay"}),(0,s.jsx)(o.Z,{onConnectWallet:()=>e(!0),walletConnected:N.isConnected,walletAddress:N.address,walletProvider:N.provider}),(0,s.jsxs)("main",{className:"flex-1 container mx-auto px-4 py-8",children:[(0,s.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8 flex items-start justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Transaction History"}),(0,s.jsx)("p",{className:"text-gray-400",children:"View and track all your privacy-preserving swaps"})]}),b.length>0&&(0,s.jsxs)("button",{onClick:()=>{confirm("Are you sure you want to clear all transaction history?")&&k()},className:"flex items-center gap-2 px-3 py-2 text-sm text-gray-400 hover:text-terminal-red hover:bg-obsidian-800 rounded-lg transition-colors",children:[(0,s.jsx)(p,{className:"w-4 h-4"}),"Clear History"]})]}),(0,s.jsx)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card p-4 mb-6",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)(f.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),(0,s.jsx)("input",{type:"text",placeholder:"Search by token or tx hash...",value:a,onChange:t=>x(t.target.value),className:"input-field pl-10"})]}),(0,s.jsx)("div",{className:"flex gap-2",children:["all","completed","pending","failed"].map(t=>(0,s.jsx)("button",{onClick:()=>y(t),className:"px-4 py-2 rounded-lg font-mono text-sm capitalize transition-colors ".concat(u===t?"bg-monero-orange text-white":"bg-obsidian-800 text-gray-400 hover:text-white"),children:t},t))})]})}),(0,s.jsx)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card overflow-hidden",children:T?(0,s.jsxs)("div",{className:"p-12 text-center",children:[(0,s.jsx)(m.Z,{className:"w-12 h-12 text-monero-orange mx-auto mb-4 animate-spin"}),(0,s.jsx)("h3",{className:"text-xl font-semibold text-white mb-2",children:"Loading Transactions"}),(0,s.jsx)("p",{className:"text-gray-400",children:"Fetching your swap history..."})]}):0===b.length?(0,s.jsxs)("div",{className:"p-12 text-center",children:[(0,s.jsx)(g.Z,{className:"w-12 h-12 text-gray-600 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-xl font-semibold text-white mb-2",children:"No Transactions Yet"}),(0,s.jsx)("p",{className:"text-gray-400 mb-6",children:"Your swap history will appear here after you make your first swap"}),(0,s.jsx)(i.default,{href:"/swap",children:(0,s.jsx)("button",{className:"btn-primary",children:"Start Swapping"})})]}):0===I.length?(0,s.jsxs)("div",{className:"p-12 text-center",children:[(0,s.jsx)(f.Z,{className:"w-12 h-12 text-gray-600 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-xl font-semibold text-white mb-2",children:"No Matching Transactions"}),(0,s.jsx)("p",{className:"text-gray-400",children:"Try adjusting your search or filter criteria"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"hidden md:grid grid-cols-6 gap-4 p-4 bg-obsidian-900 text-gray-500 text-sm font-mono border-b border-obsidian-800",children:[(0,s.jsx)("div",{children:"Date"}),(0,s.jsx)("div",{children:"From"}),(0,s.jsx)("div",{children:"To"}),(0,s.jsx)("div",{children:"Status"}),(0,s.jsx)("div",{children:"TX Hash"}),(0,s.jsx)("div",{})]}),(0,s.jsx)("div",{className:"divide-y divide-obsidian-800",children:I.map((t,e)=>{let a=v[t.status].icon;return(0,s.jsxs)(r.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*e},className:"grid grid-cols-2 md:grid-cols-6 gap-4 p-4 hover:bg-obsidian-800/50 transition-colors",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-gray-400",children:[(0,s.jsx)(j,{className:"w-4 h-4 text-gray-600 md:hidden"}),(0,s.jsx)("span",{className:"text-sm",children:t.date})]}),(0,s.jsxs)("div",{className:"text-white font-mono",children:[t.fromAmount," ",(0,s.jsx)("span",{className:"text-monero-orange",children:t.fromToken})]}),(0,s.jsxs)("div",{className:"text-white font-mono",children:[t.toAmount," ",(0,s.jsx)("span",{className:"text-terminal-green",children:t.toToken})]}),(0,s.jsx)("div",{children:(0,s.jsxs)("span",{className:v[t.status].class,children:[(0,s.jsx)(a,{className:"w-4 h-4 ".concat("pending"===t.status?"animate-spin":"")}),t.status]})}),(0,s.jsx)("div",{className:"text-gray-500 font-mono text-sm",children:t.txHash}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{className:"p-2 hover:bg-obsidian-700 rounded-lg transition-colors",title:"View on explorer",children:(0,s.jsx)(w.Z,{className:"w-4 h-4 text-gray-500"})})})]},t.id)})})]})})]}),(0,s.jsx)(c.Z,{}),t&&(0,s.jsx)(l.Z,{onClose:()=>e(!1)})]})}},2177:function(t,e,a){"use strict";a.d(e,{E:function(){return i}});let s="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJwYnRna3VucmR6Y295ZmRoc2toIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI5MjAzNzUsImV4cCI6MjA3ODQ5NjM3NX0.ZAtjUoDnIWUOs6Os1NUGKIRUQVOuXDlaCJ4HwQqZu50",n={"Content-Type":"application/json",Authorization:"Bearer ".concat(s),apikey:s};class r{async createTransaction(t){try{let e=await fetch("".concat(this.baseUrl,"/functions/v1/swap-transactions"),{method:"POST",headers:n,body:JSON.stringify(t)});if(!e.ok)return console.error("API Error:",e.status,await e.text()),null;let a=await e.json();return a.data||a}catch(t){return console.error("Failed to create transaction:",t),null}}async getTransactions(t){try{let e=t?"".concat(this.baseUrl,"/functions/v1/swap-transactions?address=").concat(encodeURIComponent(t)):"".concat(this.baseUrl,"/functions/v1/swap-transactions"),a=await fetch(e,{method:"GET",headers:n});if(!a.ok)return console.error("API Error:",a.status,await a.text()),[];let s=await a.json();return s.data||s||[]}catch(t){return console.error("Failed to fetch transactions:",t),[]}}async updateTransactionStatus(t,e,a){try{return(await fetch("".concat(this.baseUrl,"/functions/v1/swap-transactions"),{method:"PATCH",headers:n,body:JSON.stringify({id:t,status:e,txHash:a})})).ok}catch(t){return console.error("Failed to update transaction:",t),!1}}async getExchangeRate(t,e){try{let a=await fetch("".concat(this.baseUrl,"/functions/v1/swap-rates?from=").concat(encodeURIComponent(t),"&to=").concat(encodeURIComponent(e)),{method:"GET",headers:n});if(!a.ok)return console.error("API Error:",a.status,await a.text()),null;let s=await a.json();return s.data||s}catch(t){return console.error("Failed to fetch exchange rate:",t),null}}constructor(){this.baseUrl="https://bpbtgkunrdzcoyfdhskh.supabase.co"}}let i=new r},8092:function(t,e,a){"use strict";a.d(e,{Y:function(){return c}});var s=a(7527),n=a(8105),r=a(2177);let i=()=>"tx_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),o=()=>new Date().toISOString().replace("T"," ").substring(0,16),c=(0,s.Ue)()((0,n.tJ)((t,e)=>({transactions:[],isLoading:!1,lastSyncedAddress:null,addTransaction:async(e,a)=>{let s=i(),n=o(),c={...e,id:s,date:n};t(t=>({transactions:[c,...t.transactions]}));try{let n={fromToken:e.fromToken,toToken:e.toToken,fromAmount:e.fromAmount,toAmount:e.toAmount,status:e.status,txHash:e.txHash,walletAddress:a},i=await r.E.createTransaction(n);if(i)return t(t=>({transactions:t.transactions.map(t=>t.id===s?{...t,id:i.id}:t)})),i.id}catch(t){console.error("Failed to sync transaction to server, keeping local:",t)}return s},updateTransactionStatus:async(e,a,s)=>{t(t=>({transactions:t.transactions.map(t=>t.id===e?{...t,status:a,txHash:s||t.txHash}:t)}));try{await r.E.updateTransactionStatus(e,a,s)}catch(t){console.error("Failed to sync status update to server:",t)}},clearHistory:()=>{t({transactions:[],lastSyncedAddress:null})},fetchTransactions:async a=>{t({isLoading:!0});try{let s=await r.E.getTransactions(a);if(s.length>0){let n=e().transactions,r=new Set(s.map(t=>t.id)),i=n.filter(t=>!r.has(t.id)&&t.id.startsWith("tx_"));t({transactions:[...i,...s],lastSyncedAddress:a||null})}}catch(t){console.error("Failed to fetch transactions from server:",t)}finally{t({isLoading:!1})}}}),{name:"moneroswap-transactions"}))}},function(t){t.O(0,[567,528,529,338,555,883,744],function(){return t(t.s=8785)}),_N_E=t.O()}]);