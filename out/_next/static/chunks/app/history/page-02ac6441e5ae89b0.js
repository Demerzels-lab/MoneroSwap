(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[811],{3531:function(e,t,s){Promise.resolve().then(s.bind(s,9522))},9522:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var a=s(8442),n=s(128),i=s(2847),o=s(8877),r=s(1523),c=s(4803),l=s(5458),d=s(1377),x=s(1359),h=s(7794);/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let m=(0,h.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var p=s(7922),u=s(2165);/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let f=(0,h.Z)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);var b=s(5451),w=s(3882),j=s(6294);/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let y=(0,h.Z)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);function g(){let[e,t]=(0,n.useState)(!1),[s,h]=(0,n.useState)(""),[g,v]=(0,n.useState)("all"),{walletState:N}=(0,d.X$)(),{transactions:k,clearHistory:C,fetchTransactions:I,isLoading:S}=(0,x.Y)();(0,n.useEffect)(()=>{I(N.address||void 0)},[N.address,I]);let T=k.filter(e=>{let t=e.fromToken.toLowerCase().includes(s.toLowerCase())||e.toToken.toLowerCase().includes(s.toLowerCase())||e.txHash.toLowerCase().includes(s.toLowerCase()),a="all"===g||e.status===g;return t&&a});return(0,a.jsxs)("div",{className:"min-h-screen flex flex-col relative text-white selection:bg-white selection:text-black",children:[(0,a.jsx)("div",{className:"fixed inset-0 z-0 pointer-events-none opacity-[0.03] bg-[url('https://grainy-gradients.vercel.app/noise.svg')]"}),(0,a.jsx)(r.Z,{onConnectWallet:()=>t(!0),walletConnected:N.isConnected,walletAddress:N.address,walletProvider:N.provider}),(0,a.jsxs)("main",{className:"flex-1 container mx-auto px-6 pt-32 pb-20 relative z-10 max-w-5xl",children:[(0,a.jsxs)(i.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex flex-col md:flex-row md:items-end justify-between mb-12 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)("span",{className:"w-2 h-2 rounded-full bg-obsidian-700"}),(0,a.jsx)("span",{className:"text-[10px] font-mono text-obsidian-500 uppercase tracking-widest",children:"Ledger"})]}),(0,a.jsx)("h1",{className:"text-4xl md:text-5xl font-serif text-white tracking-tight",children:"Transaction History"})]}),(0,a.jsx)("div",{className:"flex items-center gap-4",children:k.length>0&&(0,a.jsxs)("button",{onClick:()=>{confirm("Clear local transaction history?")&&C()},className:"flex items-center gap-2 px-4 py-2 text-xs font-mono text-obsidian-500 hover:text-red-400 hover:bg-red-500/5 rounded transition-colors",children:[(0,a.jsx)(m,{className:"w-3 h-3"}),"CLEAR LOGS"]})})]}),(0,a.jsx)(i.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},className:"mb-8",children:(0,a.jsxs)("div",{className:"bento-card p-2 flex flex-col md:flex-row gap-4 items-center bg-obsidian-950/50 backdrop-blur-md",children:[(0,a.jsxs)("div",{className:"relative flex-1 w-full",children:[(0,a.jsx)(p.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-obsidian-500"}),(0,a.jsx)("input",{type:"text",placeholder:"Search tx hash or token...",value:s,onChange:e=>h(e.target.value),className:"w-full bg-transparent border-none pl-12 pr-4 py-3 text-sm font-mono text-white placeholder-obsidian-600 focus:ring-0"})]}),(0,a.jsx)("div",{className:"hidden md:block w-px h-8 bg-obsidian-800"}),(0,a.jsx)("div",{className:"flex gap-1 p-1 w-full md:w-auto overflow-x-auto",children:["all","completed","pending","failed"].map(e=>(0,a.jsx)("button",{onClick:()=>v(e),className:"px-4 py-2 rounded text-xs font-mono uppercase tracking-wide transition-all whitespace-nowrap ".concat(g===e?"bg-white text-black":"text-obsidian-500 hover:text-white hover:bg-white/5"),children:e},e))})]})}),(0,a.jsxs)(i.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"bento-card overflow-hidden min-h-[400px] flex flex-col",children:[(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-4 px-6 py-4 border-b border-obsidian-800 bg-obsidian-900/30",children:[(0,a.jsx)("div",{className:"col-span-3 text-[10px] font-mono text-obsidian-500 uppercase tracking-widest",children:"Timestamp"}),(0,a.jsx)("div",{className:"col-span-5 text-[10px] font-mono text-obsidian-500 uppercase tracking-widest",children:"Route Details"}),(0,a.jsx)("div",{className:"col-span-2 text-[10px] font-mono text-obsidian-500 uppercase tracking-widest",children:"Status"}),(0,a.jsx)("div",{className:"col-span-2 text-right text-[10px] font-mono text-obsidian-500 uppercase tracking-widest",children:"Explorer"})]}),(0,a.jsx)("div",{className:"flex-1 bg-surface/30",children:S?(0,a.jsxs)("div",{className:"h-full flex flex-col items-center justify-center p-12",children:[(0,a.jsx)(u.Z,{className:"w-6 h-6 text-white animate-spin mb-4"}),(0,a.jsx)("p",{className:"text-xs font-mono text-obsidian-500 uppercase",children:"Synchronizing Ledger..."})]}):0===T.length?(0,a.jsxs)("div",{className:"h-full flex flex-col items-center justify-center p-12 text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 rounded-full bg-obsidian-900 border border-obsidian-800 flex items-center justify-center mb-6",children:(0,a.jsx)(f,{className:"w-6 h-6 text-obsidian-600"})}),(0,a.jsx)("h3",{className:"text-lg font-serif text-white mb-2",children:"No Records Found"}),(0,a.jsx)("p",{className:"text-sm text-obsidian-400 max-w-xs mx-auto mb-8 font-light",children:0===k.length?"Your anonymous transaction history will appear here.":"No transactions match your current filters."}),0===k.length&&(0,a.jsx)(o.default,{href:"/swap",children:(0,a.jsxs)("button",{className:"btn-primary",children:["Initiate Swap ",(0,a.jsx)(b.Z,{className:"w-4 h-4 ml-2"})]})})]}):(0,a.jsx)("div",{className:"divide-y divide-obsidian-800/50",children:T.map(e=>(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-4 px-6 py-5 items-center hover:bg-white/[0.02] transition-colors group",children:[(0,a.jsxs)("div",{className:"col-span-3 flex flex-col justify-center",children:[(0,a.jsx)("span",{className:"text-sm font-mono text-white",children:e.date.split(",")[0]}),(0,a.jsx)("span",{className:"text-[10px] font-mono text-obsidian-500",children:e.date.split(",")[1]})]}),(0,a.jsx)("div",{className:"col-span-5",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("span",{className:"block text-sm font-mono text-white",children:e.fromAmount}),(0,a.jsx)("span",{className:"block text-[10px] font-mono text-obsidian-500",children:e.fromToken})]}),(0,a.jsx)(b.Z,{className:"w-3 h-3 text-obsidian-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"block text-sm font-mono text-white",children:e.toAmount}),(0,a.jsx)("span",{className:"block text-[10px] font-mono text-obsidian-500",children:e.toToken})]})]})}),(0,a.jsxs)("div",{className:"col-span-2",children:["completed"===e.status&&(0,a.jsxs)("span",{className:"status-success",children:[(0,a.jsx)(w.Z,{className:"w-3 h-3"})," SUCCESS"]}),"pending"===e.status&&(0,a.jsxs)("span",{className:"status-pending",children:[(0,a.jsx)(u.Z,{className:"w-3 h-3 animate-spin"})," PENDING"]}),"failed"===e.status&&(0,a.jsxs)("span",{className:"status-error",children:[(0,a.jsx)(j.Z,{className:"w-3 h-3"})," FAILED"]})]}),(0,a.jsx)("div",{className:"col-span-2 flex justify-end",children:(0,a.jsxs)("a",{href:"#",className:"flex items-center gap-2 text-[10px] font-mono text-obsidian-500 hover:text-white transition-colors group-hover:underline decoration-obsidian-700 underline-offset-4",children:[e.txHash.slice(0,6),"...",e.txHash.slice(-4),(0,a.jsx)(y,{className:"w-3 h-3"})]})})]},e.id))})})]})]}),(0,a.jsx)(c.Z,{}),e&&(0,a.jsx)(l.Z,{onClose:()=>t(!1)})]})}},2450:function(e,t,s){"use strict";s.d(t,{E:function(){return o}});let a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJwYnRna3VucmR6Y295ZmRoc2toIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI5MjAzNzUsImV4cCI6MjA3ODQ5NjM3NX0.ZAtjUoDnIWUOs6Os1NUGKIRUQVOuXDlaCJ4HwQqZu50",n={"Content-Type":"application/json",Authorization:"Bearer ".concat(a),apikey:a};class i{async createTransaction(e){try{let t=await fetch("".concat(this.baseUrl,"/functions/v1/swap-transactions"),{method:"POST",headers:n,body:JSON.stringify(e)});if(!t.ok)return console.error("API Error:",t.status,await t.text()),null;let s=await t.json();return s.data||s}catch(e){return console.error("Failed to create transaction:",e),null}}async getTransactions(e){try{let t=e?"".concat(this.baseUrl,"/functions/v1/swap-transactions?address=").concat(encodeURIComponent(e)):"".concat(this.baseUrl,"/functions/v1/swap-transactions"),s=await fetch(t,{method:"GET",headers:n});if(!s.ok)return console.error("API Error:",s.status,await s.text()),[];let a=await s.json();return a.data||a||[]}catch(e){return console.error("Failed to fetch transactions:",e),[]}}async updateTransactionStatus(e,t,s){try{return(await fetch("".concat(this.baseUrl,"/functions/v1/swap-transactions"),{method:"PATCH",headers:n,body:JSON.stringify({id:e,status:t,txHash:s})})).ok}catch(e){return console.error("Failed to update transaction:",e),!1}}async getExchangeRate(e,t){try{let s=await fetch("".concat(this.baseUrl,"/functions/v1/swap-rates?from=").concat(encodeURIComponent(e),"&to=").concat(encodeURIComponent(t)),{method:"GET",headers:n});if(!s.ok)return console.error("API Error:",s.status,await s.text()),null;let a=await s.json();return a.data||a}catch(e){return console.error("Failed to fetch exchange rate:",e),null}}constructor(){this.baseUrl="https://bpbtgkunrdzcoyfdhskh.supabase.co"}}let o=new i},1359:function(e,t,s){"use strict";s.d(t,{Y:function(){return c}});var a=s(3725),n=s(9751),i=s(2450);let o=()=>"tx_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),r=()=>new Date().toISOString().replace("T"," ").substring(0,16),c=(0,a.Ue)()((0,n.tJ)((e,t)=>({transactions:[],isLoading:!1,lastSyncedAddress:null,addTransaction:async(t,s)=>{let a=o(),n=r(),c={...t,id:a,date:n};e(e=>({transactions:[c,...e.transactions]}));try{let n={fromToken:t.fromToken,toToken:t.toToken,fromAmount:t.fromAmount,toAmount:t.toAmount,status:t.status,txHash:t.txHash,walletAddress:s},o=await i.E.createTransaction(n);if(o)return e(e=>({transactions:e.transactions.map(e=>e.id===a?{...e,id:o.id}:e)})),o.id}catch(e){console.error("Failed to sync transaction to server, keeping local:",e)}return a},updateTransactionStatus:async(t,s,a)=>{e(e=>({transactions:e.transactions.map(e=>e.id===t?{...e,status:s,txHash:a||e.txHash}:e)}));try{await i.E.updateTransactionStatus(t,s,a)}catch(e){console.error("Failed to sync status update to server:",e)}},clearHistory:()=>{e({transactions:[],lastSyncedAddress:null})},fetchTransactions:async s=>{e({isLoading:!0});try{let a=await i.E.getTransactions(s);if(a.length>0){let n=t().transactions,i=new Set(a.map(e=>e.id)),o=n.filter(e=>!i.has(e.id)&&e.id.startsWith("tx_"));e({transactions:[...o,...a],lastSyncedAddress:s||null})}}catch(e){console.error("Failed to fetch transactions from server:",e)}finally{e({isLoading:!1})}}}),{name:"moneroswap-transactions"}))}},function(e){e.O(0,[471,735,677,913,230,481,744],function(){return e(e.s=3531)}),_N_E=e.O()}]);