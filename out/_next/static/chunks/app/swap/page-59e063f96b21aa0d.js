(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[998],{5382:function(e,t,s){Promise.resolve().then(s.bind(s,7121))},1404:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(4063).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},8671:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(4063).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},8201:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(4063).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},8057:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(4063).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},9023:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(4063).Z)("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]])},7335:function(e,t,s){"use strict";let a;s.r(t),s.d(t,{Providers:function(){return N},useMoneroWASM:function(){return y}});var n=s(1668),r=s(9777),i=s(4214),l=s(4119),o=s(8481),c=s(1565),d=s(2752),m=s(290),x=s(3241),h=s(7882),u=s(7699);let p=(0,l.createContext)(void 0),g={success:d.Z,error:m.Z,warning:x.Z,info:h.Z},b={success:"border-terminal-green/30 bg-terminal-green/10 text-terminal-green",error:"border-terminal-red/30 bg-terminal-red/10 text-terminal-red",warning:"border-terminal-yellow/30 bg-terminal-yellow/10 text-terminal-yellow",info:"border-cyber-blue/30 bg-cyber-blue/10 text-cyber-blue"};function f(e){let{children:t}=e,[s,a]=(0,l.useState)([]),r=(0,l.useCallback)((e,t,s)=>{let n=Date.now().toString();a(a=>[...a,{id:n,type:e,title:t,message:s}]),setTimeout(()=>{a(e=>e.filter(e=>e.id!==n))},4e3)},[]),i=e=>{a(t=>t.filter(t=>t.id!==e))};return(0,n.jsxs)(p.Provider,{value:{showToast:r},children:[t,(0,n.jsx)("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col gap-2",children:(0,n.jsx)(o.M,{children:s.map(e=>{let t=g[e.type];return(0,n.jsxs)(c.E.div,{initial:{opacity:0,x:100,scale:.9},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:100,scale:.9},className:"flex items-start gap-3 p-4 rounded-lg border backdrop-blur-xl min-w-[300px] max-w-[400px] ".concat(b[e.type]),children:[(0,n.jsx)(t,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("p",{className:"font-semibold text-white",children:e.title}),e.message&&(0,n.jsx)("p",{className:"text-sm opacity-80 mt-1",children:e.message})]}),(0,n.jsx)("button",{onClick:()=>i(e.id),className:"opacity-60 hover:opacity-100",children:(0,n.jsx)(u.Z,{className:"w-4 h-4"})})]},e.id)})})})]})}let j=(0,l.createContext)({isLoaded:!1,isLoading:!0,error:null});function y(){return(0,l.useContext)(j)}function N(e){let{children:t}=e,s=(a||(a=new r.S({defaultOptions:{queries:{staleTime:6e4,refetchOnWindowFocus:!1}}})),a),[o]=(0,l.useState)({isLoaded:!1,isLoading:!0,error:null});return(0,n.jsx)(i.aH,{client:s,children:(0,n.jsx)(j.Provider,{value:o,children:(0,n.jsx)(f,{children:t})})})}},7121:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Y}});var a=s(1668),n=s(4119),r=s(1565),i=s(8481),l=s(2522),o=s(9066),c=s(8798),d=s(1599),m=s(8201),x=s(4063);/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let h=(0,x.Z)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),u=(0,x.Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var p=s(9023),g=s(5782),b=s(3241),f=s(6293),j=s(8092),y=s(9063),N=s(7699),v=s(725),w=s(8671);function k(e){let{currencies:t,selected:s,excludeId:i,onSelect:l,onClose:o}=e,[c,d]=(0,n.useState)(""),m=(0,n.useMemo)(()=>t.filter(e=>{let t=e.name.toLowerCase().includes(c.toLowerCase())||e.symbol.toLowerCase().includes(c.toLowerCase()),s=!i||e.id!==i;return t&&s}).sort((e,t)=>e.isNative&&!t.isNative?-1:!e.isNative&&t.isNative?1:e.name.localeCompare(t.name)),[t,c,i]),x=(0,n.useMemo)(()=>{let e={};return m.forEach(t=>{let s=t.chainType;e[s]||(e[s]=[]),e[s].push(t)}),e},[m]),h=e=>{switch(e){case"EVM":return"Ethereum & EVM Chains";case"SOLANA":return"Solana";case"XMR":return"Monero";default:return e}},u=e=>{switch(e){case"EVM":return"bg-blue-500/20 text-blue-400";case"SOLANA":return"bg-cyan-500/20 text-cyan-400";case"XMR":return"bg-monero-orange/20 text-monero-orange";default:return"bg-gray-500/20 text-gray-400"}};return(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,a.jsx)(r.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:o,className:"absolute inset-0 bg-black/70 backdrop-blur-sm"}),(0,a.jsxs)(r.E.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"relative w-full max-w-sm card p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Select Currency"}),(0,a.jsx)("button",{onClick:o,className:"p-1 rounded hover:bg-obsidian-800 transition-colors",children:(0,a.jsx)(N.Z,{className:"w-5 h-5 text-gray-400"})})]}),(0,a.jsxs)("div",{className:"mb-4 relative",children:[(0,a.jsx)(v.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),(0,a.jsx)("input",{type:"text",value:c,onChange:e=>d(e.target.value),placeholder:"Search currency...",className:"w-full pl-10 pr-4 py-2 bg-obsidian-800 border border-obsidian-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-monero-orange",autoFocus:!0})]}),(0,a.jsxs)("div",{className:"max-h-80 overflow-y-auto space-y-4 pr-2",children:[Object.entries(x).map(e=>{let[t,n]=e;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("span",{className:"px-2 py-0.5 rounded text-xs font-medium ".concat(u(t)),children:h(t)}),(0,a.jsxs)("span",{className:"text-gray-500 text-xs",children:[n.length," token",1!==n.length?"s":""]})]}),(0,a.jsx)("div",{className:"space-y-1",children:n.map(e=>(0,a.jsxs)(r.E.button,{onClick:()=>l(e),whileHover:{scale:1.01},whileTap:{scale:.99},className:"w-full flex items-center gap-3 p-2.5 rounded-lg transition-all ".concat(s===e.id?"bg-monero-orange/20 border border-monero-orange/30":"bg-obsidian-800/50 border border-transparent hover:bg-obsidian-800"),children:[(0,a.jsx)("span",{className:"text-xl",children:e.icon}),(0,a.jsxs)("div",{className:"flex-1 text-left",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("p",{className:"text-white font-medium",children:e.name}),e.isNative&&(0,a.jsx)("span",{className:"px-1.5 py-0.5 rounded bg-terminal-green/20 text-terminal-green text-[10px] font-medium",children:"NATIVE"})]}),(0,a.jsx)("p",{className:"text-gray-500 text-xs",children:e.symbol})]}),s===e.id&&(0,a.jsx)(w.Z,{className:"w-5 h-5 text-monero-orange"})]},e.id))})]},t)}),0===m.length&&(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"No currencies found"}),(0,a.jsx)("p",{className:"text-gray-600 text-xs mt-1",children:"Try a different search term"})]})]}),(0,a.jsx)("div",{className:"mt-4 pt-4 border-t border-obsidian-800",children:(0,a.jsx)("p",{className:"text-xs text-gray-500 text-center",children:"Bridge swaps between different chains supported"})})]})]})}var C=s(566);/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let S=(0,x.Z)("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var Z=s(9882),T=s(1404);function M(e){let{onClick:t,disabled:s,stage:i,needsConnection:l=!1,onConnectClick:c}=e,[m,x]=(0,n.useState)(5);return(0,n.useEffect)(()=>{if("preparing"===i){x(5);let e=setInterval(()=>{x(t=>t<=1?(clearInterval(e),0):t-1)},1e3);return()=>clearInterval(e)}},[i]),(0,a.jsx)(r.E.button,{onClick:()=>{l&&c?c():t()},disabled:s&&!l,whileHover:"idle"!==i||l?{}:{scale:1.02},whileTap:"idle"!==i||l?{}:{scale:.98},className:"w-full py-4 rounded-xl font-semibold font-mono text-sm transition-all flex items-center justify-center gap-2\n        ".concat("complete"===i?"bg-terminal-green hover:bg-terminal-green text-black":"","\n        ").concat(l?"bg-gradient-to-r from-monero-orange to-monero-orangeLight text-white hover:shadow-lg hover:shadow-monero-orange/30":"idle"===i?"bg-monero-orange text-white hover:bg-monero-orangeLight shadow-lg shadow-monero-orange/20":"bg-obsidian-800 text-gray-400 cursor-not-allowed","\n        ").concat(s&&!l?"opacity-50 cursor-not-allowed":"","\n      "),children:(()=>{switch(i){case"preparing":return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(C.Z,{className:"w-5 h-5 animate-spin"}),(0,a.jsxs)("span",{children:["Preparing Privacy Protocol... ",m,"s"]})]});case"signing":return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Generating Ring Signatures..."})]});case"broadcasting":return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(p.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Broadcasting Transaction..."})]});case"complete":return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(S,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Swap Complete!"})]});default:if(l)return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Connect Wallet to Swap"}),(0,a.jsx)(Z.Z,{className:"w-4 h-4"})]});return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Initiate Privacy Swap"}),(0,a.jsx)(T.Z,{className:"w-4 h-4"})]})}})()})}var E=s(8057),A=s(7882);let I=[.5,1,2,5],R=[5,10,15,20,25];function P(e){let{slippage:t,mixinCount:s,onClose:i}=e,{setSlippage:l,setMixinCount:o}=(0,f.go)(),[c,d]=(0,n.useState)(t),[m,x]=(0,n.useState)(s);return(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,a.jsx)(r.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:i,className:"absolute inset-0 bg-black/70 backdrop-blur-sm"}),(0,a.jsxs)(r.E.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"relative w-full max-w-md card p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-white",children:"Swap Settings"}),(0,a.jsx)("button",{onClick:i,className:"p-2 rounded-lg hover:bg-obsidian-800 transition-colors",children:(0,a.jsx)(N.Z,{className:"w-5 h-5 text-gray-400"})})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-white",children:"Slippage Tolerance"}),(0,a.jsxs)("span",{className:"text-sm terminal-text",children:[c,"%"]})]}),(0,a.jsx)("div",{className:"grid grid-cols-4 gap-2",children:I.map(e=>(0,a.jsxs)("button",{onClick:()=>d(e),className:"py-2 px-3 rounded-lg font-mono text-sm transition-all ".concat(c===e?"bg-monero-orange text-white":"bg-obsidian-800 text-gray-400 hover:bg-obsidian-700"),children:[e,"%"]},e))}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("input",{type:"number",value:c,onChange:e=>d(parseFloat(e.target.value)||1),step:.1,min:.1,max:50,className:"w-full px-3 py-2 bg-obsidian-800 border border-obsidian-700 rounded-lg text-white font-mono text-sm focus:outline-none focus:border-monero-orange"})}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Your transaction will revert if the price changes unfavorably by more than this percentage."})]}),(0,a.jsxs)("div",{className:"mb-6 p-4 rounded-lg bg-obsidian-800/50 border border-obsidian-700",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)("div",{className:"p-1.5 rounded bg-monero-orange/10",children:(0,a.jsx)("svg",{className:"w-4 h-4 text-monero-orange",viewBox:"0 0 24 24",fill:"currentColor",children:(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"})})}),(0,a.jsx)("span",{className:"text-sm font-medium text-white",children:"Monero Privacy Settings"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("label",{className:"text-sm text-gray-400",children:"Ring Size (Mixin Count)"}),(0,a.jsxs)("span",{className:"text-sm terminal-text",children:[m," mixins"]})]}),(0,a.jsx)("div",{className:"grid grid-cols-5 gap-2",children:R.map(e=>(0,a.jsx)("button",{onClick:()=>x(e),className:"py-1.5 rounded font-mono text-xs transition-all ".concat(m===e?"bg-monero-orange text-white":"bg-obsidian-900 text-gray-400 hover:bg-obsidian-700"),children:e},e))}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Higher mixin count = stronger privacy = larger transaction size"})]})]}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("button",{className:"flex items-center justify-between w-full p-3 rounded-lg bg-obsidian-800/50 border border-obsidian-700 hover:border-obsidian-600 transition-colors",children:[(0,a.jsx)("span",{className:"text-sm text-white",children:"Advanced Settings"}),(0,a.jsx)(E.Z,{className:"w-4 h-4 text-gray-400"})]})}),(0,a.jsx)("div",{className:"mb-6 p-3 rounded-lg bg-blue-500/10 border border-blue-500/20",children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(A.Z,{className:"w-4 h-4 text-blue-400 mt-0.5"}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:"These settings apply to all swaps. Privacy settings only affect Monero transactions."})]})}),(0,a.jsx)("button",{onClick:()=>{l(c),o(m),i()},className:"w-full btn-primary",children:"Save Settings"})]})]})}var L=s(2177);let F={"xmr-eth":.0035,"eth-xmr":285.7,"xmr-usdc":150,"usdc-xmr":.0067,"xmr-usdt":150,"usdt-xmr":.0067,"xmr-dai":150,"dai-xmr":.0067,"xmr-sol":4.5,"sol-xmr":.222,"eth-usdc":1800,"usdc-eth":56e-5,"eth-usdt":1800,"usdt-eth":56e-5,"sol-usdc":100,"usdc-sol":.01,"sol-usdt":100,"usdt-sol":.01,"bnb-xmr":200,"xmr-bnb":.005,"matic-xmr":.3,"xmr-matic":3.33,"link-xmr":4e3,"xmr-link":25e-5,"uni-xmr":2e3,"xmr-uni":5e-4,"avax-xmr":180,"xmr-avax":.0056};function U(e){let{onVisualizing:t}=e,{fromCurrencyId:s,toCurrencyId:l,fromAmount:x,toAmount:N,slippage:v,mixinCount:w,setFromCurrency:C,setToCurrency:S,setFromAmount:Z,setToAmount:T,swapDirection:E}=(0,f.go)(),{walletState:A,walletState:{isConnected:I,address:R,chainType:U}}=(0,f.X$)(),{addTransaction:O,updateTransactionStatus:z}=(0,j.Y)(),[X,B]=(0,n.useState)(!1),[D,H]=(0,n.useState)(!1),[J,W]=(0,n.useState)(null),[Y,q]=(0,n.useState)("idle"),V=(0,n.useMemo)(()=>y.ck.find(e=>e.id===s),[s]),_=(0,n.useMemo)(()=>y.ck.find(e=>e.id===l),[l]),{rate:G,isLoading:K}=function(e,t){let[s,a]=(0,n.useState)(1),[r,i]=(0,n.useState)(!1),[l,o]=(0,n.useState)(null),c=(0,n.useCallback)((e,t)=>F["".concat(e,"-").concat(t)]||1,[]),d=(0,n.useCallback)(async()=>{if(!e||!t||e===t){a(1);return}i(!0),o(null);try{let s=await L.E.getExchangeRate(e.toUpperCase(),t.toUpperCase());s&&s.rate?a(s.rate):a(c(e,t))}catch(s){console.error("Failed to fetch exchange rate:",s),o("Failed to fetch rate, using fallback"),a(c(e,t))}finally{i(!1)}},[e,t,c]);return(0,n.useEffect)(()=>{d()},[d]),{rate:s,isLoading:r,error:l,refetch:d}}(s,l);(0,n.useEffect)(()=>{if(x&&s!==l&&(0,y.tg)(s,l)){H(!0);let e=setTimeout(()=>{let e=parseFloat(x);if(isNaN(e))T("");else{let t=e*G;T(t<1e-4?t.toExponential(4):t.toFixed(6))}H(!1)},300);return()=>clearTimeout(e)}},[x,s,l,G,T]);let Q=async()=>{if(!x||0>=parseFloat(x)||!V||!_)return;let e="0x".concat(Math.random().toString(16).substr(2,8),"...").concat(Math.random().toString(16).substr(2,4)),s=await O({fromToken:V.symbol,toToken:_.symbol,fromAmount:x,toAmount:N||"0",status:"pending",txHash:e},R||void 0);q("preparing"),t(!0);try{await new Promise(e=>setTimeout(e,2e3)),q("signing"),await new Promise(e=>setTimeout(e,3e3)),q("broadcasting"),await new Promise(e=>setTimeout(e,2e3)),q("complete"),z(s,"completed"),setTimeout(()=>{q("idle"),t(!1),Z(""),T("")},3e3)}catch(e){z(s,"failed"),q("idle"),t(!1)}},$=(0,n.useMemo)(()=>!(!x||0>=parseFloat(x))&&s!==l&&(0,y.tg)(s,l),[x,s,l]),ee=(0,n.useMemo)(()=>(0,y.Lq)(s,l),[s,l]),et=e=>{let t=y.ck.find(t=>t.id===e);return t?{icon:t.icon,name:t.name,symbol:t.symbol,chainType:t.chainType}:{icon:"?",name:"Unknown",symbol:e.toUpperCase()}},es=et(s),ea=et(l);return(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o.Z,{className:"w-5 h-5 text-monero-orange"}),(0,a.jsx)("span",{className:"font-semibold text-white",children:"Privacy Swap"})]}),(0,a.jsx)("button",{onClick:()=>B(!0),className:"p-2 rounded-lg hover:bg-obsidian-800 transition-colors",children:(0,a.jsx)(c.Z,{className:"w-5 h-5 text-gray-400"})})]}),!I&&(0,a.jsx)("div",{className:"mb-4 p-3 rounded-lg bg-obsidian-800/50 border border-obsidian-700",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(d.Z,{className:"w-5 h-5 text-monero-orange"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-white text-sm font-medium",children:"Connect your wallet"}),(0,a.jsx)("p",{className:"text-gray-500 text-xs",children:"Connect MetaMask or Phantom to start swapping"})]})]})}),(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"You pay"}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["Balance: ",A.balance||"0.00"," ",es.symbol]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("button",{onClick:()=>W("from"),className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-obsidian-800 border border-obsidian-700  hover:border-monero-orange/50 transition-colors min-w-[120px]",children:[(0,a.jsx)("span",{className:"text-xl",children:es.icon}),(0,a.jsxs)("div",{className:"flex flex-col items-start",children:[(0,a.jsx)("span",{className:"font-semibold text-white",children:es.symbol}),(0,a.jsx)("span",{className:"text-[10px] text-gray-500",children:es.name})]}),(0,a.jsx)(m.Z,{className:"w-4 h-4 text-gray-400 ml-auto"})]}),(0,a.jsx)("input",{type:"number",value:x,onChange:e=>Z(e.target.value),placeholder:"0.00",className:"flex-1 bg-transparent text-2xl font-mono text-white placeholder-gray-600  focus:outline-none text-right"})]})]}),(0,a.jsx)("div",{className:"flex justify-center -my-3 relative z-10",children:(0,a.jsx)("button",{onClick:()=>{C(l),S(s)},className:"p-2 rounded-full bg-obsidian-800 border border-obsidian-700 hover:border-monero-orange  transition-all shadow-lg hover:shadow-monero-orange/20 group",children:(0,a.jsx)(h,{className:"w-5 h-5 text-gray-400 group-hover:text-monero-orange transition-colors"})})}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"You receive"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[(0,a.jsx)("span",{children:"Rate:"}),(0,a.jsxs)("span",{className:"terminal-text",children:["1 ",es.symbol," â‰ˆ ",G.toFixed(6)," ",ea.symbol]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("button",{onClick:()=>W("to"),className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-obsidian-800 border border-obsidian-700  hover:border-monero-orange/50 transition-colors min-w-[120px]",children:[(0,a.jsx)("span",{className:"text-xl",children:ea.icon}),(0,a.jsxs)("div",{className:"flex flex-col items-start",children:[(0,a.jsx)("span",{className:"font-semibold text-white",children:ea.symbol}),(0,a.jsx)("span",{className:"text-[10px] text-gray-500",children:ea.name})]}),(0,a.jsx)(m.Z,{className:"w-4 h-4 text-gray-400 ml-auto"})]}),(0,a.jsx)("div",{className:"flex-1 flex items-center justify-end gap-2",children:(0,a.jsx)("span",{className:"text-2xl font-mono text-white",children:D?(0,a.jsx)(u,{className:"w-6 h-6 animate-spin text-gray-500"}):N||"0.00"})})]})]}),ee&&x&&parseFloat(x)>0&&(parseFloat(x)<ee.minAmount||parseFloat(x)>ee.maxAmount)&&(0,a.jsx)("div",{className:"mt-3 p-2 rounded-lg bg-terminal-yellow/10 border border-terminal-yellow/20",children:(0,a.jsxs)("p",{className:"text-terminal-yellow text-xs",children:["Amount must be between ",ee.minAmount," and ",ee.maxAmount," ",es.symbol]})}),!(0,y.tg)(s,l)&&(0,a.jsx)("div",{className:"mt-3 p-2 rounded-lg bg-red-500/10 border border-red-500/20",children:(0,a.jsx)("p",{className:"text-red-400 text-xs",children:"This swap pair is not currently supported"})}),(0,a.jsx)("div",{className:"mt-4 p-3 rounded-lg bg-obsidian-800/50 border border-obsidian-700",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg bg-monero-orange/10",children:(0,a.jsx)(p.Z,{className:"w-4 h-4 text-monero-orange"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm text-white font-medium",children:"Privacy Protection Active"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:(null==V?void 0:V.chainType)==="XMR"?(0,a.jsxs)(a.Fragment,{children:["Ring Signatures with ",w," mixins + RingCT"]}):(null==_?void 0:_.chainType)==="XMR"?(0,a.jsx)(a.Fragment,{children:"Recipient will receive via stealth addresses"}):(0,a.jsx)(a.Fragment,{children:"Cross-chain privacy bridge with zero-knowledge proofs"})})]}),(0,a.jsx)(g.Z,{className:"w-4 h-4 text-terminal-green"})]})}),(0,a.jsx)(i.M,{children:"idle"!==Y&&(0,a.jsx)(r.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-4 overflow-hidden",children:(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-obsidian-800/50 border border-obsidian-700",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"Swap Progress"}),(0,a.jsxs)("span",{className:"text-xs terminal-text",children:["preparing"===Y&&"Preparing privacy protocol...","signing"===Y&&"Generating ring signatures...","broadcasting"===Y&&"Broadcasting transaction...","complete"===Y&&"Swap complete!"]})]}),(0,a.jsx)("div",{className:"flex gap-1",children:["preparing","signing","broadcasting","complete"].map((e,t)=>{let s=["idle","preparing","signing","broadcasting","complete"].indexOf(Y),n=e===Y;return(0,a.jsx)("div",{className:"flex-1 h-1 rounded-full transition-all ".concat(t<s?"bg-terminal-green":n?"bg-monero-orange animate-pulse":"bg-obsidian-700")},e)})})]})})}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)(M,{onClick:Q,disabled:!$||"idle"!==Y,stage:Y,needsConnection:!I})}),"btc"===s&&(0,a.jsx)("div",{className:"mt-4 p-3 rounded-lg bg-terminal-yellow/10 border border-terminal-yellow/20",children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(b.Z,{className:"w-4 h-4 text-terminal-yellow mt-0.5"}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:"BTC will be sent to a stealth address. The counterparty will lock XMR before you can claim BTC."})]})}),(0,a.jsx)(i.M,{children:J&&(0,a.jsx)(k,{currencies:y.ck,selected:"from"===J?s:l,excludeId:"from"===J?l:s,onSelect:e=>{"from"===J?C(e.id):S(e.id),W(null)},onClose:()=>W(null)})}),(0,a.jsx)(i.M,{children:X&&(0,a.jsx)(P,{slippage:v,mixinCount:w,onClose:()=>B(!1)})})]})}/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let O=(0,x.Z)("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);function z(e){let{}=e,[t,s]=(0,n.useState)(!0),[i,l]=(0,n.useState)("mixing"),[c,d]=(0,n.useState)([]);return(0,n.useEffect)(()=>{(()=>{let e=[];for(let t=0;t<10;t++){let s=t/10*Math.PI*2,a=80+20*Math.random();e.push({id:t,x:100+Math.cos(s)*a,y:100+Math.sin(s)*a,opacity:.3+.3*Math.random()})}d(e)})();let e=setTimeout(()=>{l("signing")},2e3),t=setTimeout(()=>{l("complete")},4e3);return()=>{clearTimeout(e),clearTimeout(t)}},[]),(0,a.jsxs)("div",{className:"card p-4 h-full",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(o.Z,{className:"w-5 h-5 text-monero-orange"}),(0,a.jsx)("span",{className:"font-semibold text-white",children:"Ring Signature"}),(0,a.jsx)("div",{className:"ml-auto",children:t&&(0,a.jsx)(u,{className:"w-4 h-4 text-gray-400 animate-spin"})})]}),(0,a.jsxs)("div",{className:"relative w-full aspect-square flex items-center justify-center bg-obsidian-950 rounded-xl overflow-hidden",children:[(0,a.jsxs)("svg",{className:"absolute inset-0 w-full h-full opacity-10",children:[(0,a.jsx)("defs",{children:(0,a.jsx)("pattern",{id:"grid",width:"10",height:"10",patternUnits:"userSpaceOnUse",children:(0,a.jsx)("path",{d:"M 10 0 L 0 0 0 10",fill:"none",stroke:"currentColor",strokeWidth:"0.5"})})}),(0,a.jsx)("rect",{width:"100%",height:"100%",fill:"url(#grid)"})]}),(0,a.jsxs)("svg",{className:"absolute inset-0 w-full h-full",viewBox:"0 0 200 200",children:[c.map((e,t)=>(0,a.jsx)(r.E.circle,{cx:e.x,cy:e.y,r:"signing"===i?6:4,fill:"complete"===i?"#00FF41":"#4B5563",opacity:e.opacity,animate:{r:"signing"===i?[6,8,6]:4,opacity:"signing"===i?[e.opacity,.6,e.opacity]:e.opacity},transition:{duration:"signing"===i?1:.5,repeat:"signing"===i?1/0:0}},e.id)),(0,a.jsx)(r.E.circle,{cx:"100",cy:"100",r:"complete"===i?10:8,fill:"complete"===i?"#F26822":"#6B7280",animate:{r:"signing"===i?[8,12,8]:8,fill:"complete"===i?"#F26822":"#6B7280"},transition:{duration:"signing"===i?1:.5,repeat:"signing"===i?1/0:0}}),"signing"===i&&c.map((e,t)=>(0,a.jsx)(r.E.line,{x1:"100",y1:"100",x2:e.x,y2:e.y,stroke:"#F26822",strokeWidth:"1",strokeOpacity:"0.3",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:.5,delay:.1*t}},"line-".concat(e.id)))]}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:"complete"===i?(0,a.jsx)(r.E.div,{initial:{scale:0},animate:{scale:1},className:"w-16 h-16 rounded-full bg-monero-orange flex items-center justify-center shadow-lg shadow-monero-orange/50",children:(0,a.jsx)(O,{className:"w-8 h-8 text-white"})}):(0,a.jsx)(r.E.div,{className:"w-12 h-12 rounded-full bg-obsidian-800 flex items-center justify-center border border-obsidian-700",children:(0,a.jsx)("span",{className:"text-xs font-mono text-gray-400",children:"?"})})})]}),(0,a.jsxs)("div",{className:"mt-4 p-3 rounded-lg bg-obsidian-800/50 border border-obsidian-700",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat("complete"===i?"bg-terminal-green animate-pulse":"signing"===i?"bg-monero-orange animate-pulse":"bg-terminal-yellow")}),(0,a.jsx)("span",{className:"text-sm text-white",children:(()=>{switch(i){case"mixing":return"Selecting decoy outputs...";case"signing":return"Constructing ring signature...";case"complete":return"Signature generated!";default:return"Initializing..."}})()})]}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,a.jsx)("span",{children:"Decoys: 10"}),(0,a.jsxs)("span",{children:["Privacy: ","complete"===i?"100%":"signing"===i?"60%":"20%"]})]})]}),(0,a.jsxs)("div",{className:"mt-3 flex items-center justify-center gap-4 text-xs",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-monero-orange"}),(0,a.jsx)("span",{className:"text-gray-500",children:"Actual Output"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-gray-500"}),(0,a.jsx)("span",{className:"text-gray-500",children:"Decoys"})]})]})]})}var X=s(5606),B=s(4404);function D(){let e=[{icon:(0,a.jsx)(o.Z,{className:"w-5 h-5"}),title:"Ring Signatures",description:"Your sender identity is mixed with 10+ other outputs",color:"monero-orange"},{icon:(0,a.jsx)(g.Z,{className:"w-5 h-5"}),title:"Stealth Addresses",description:"Recipients receive funds at one-time addresses",color:"terminal-green"},{icon:(0,a.jsx)(X.Z,{className:"w-5 h-5"}),title:"RingCT",description:"Transaction amounts are cryptographically hidden",color:"blue-400"}];return(0,a.jsxs)("div",{className:"card p-4 h-full flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(B.Z,{className:"w-5 h-5 text-monero-orange"}),(0,a.jsx)("span",{className:"font-semibold text-white",children:"Privacy Tech"})]}),(0,a.jsx)("div",{className:"flex-1 space-y-3",children:e.map((e,t)=>(0,a.jsx)(r.E.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"p-3 rounded-lg bg-obsidian-800/50 border border-obsidian-700 hover:border-monero-orange/30 transition-colors group cursor-pointer",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg bg-".concat(e.color,"/10 text-").concat(e.color),children:e.icon}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm text-white font-medium group-hover:text-monero-orange transition-colors",children:e.title}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:e.description})]}),(0,a.jsx)(T.Z,{className:"w-4 h-4 text-gray-600 group-hover:text-monero-orange transition-colors opacity-0 group-hover:opacity-100"})]})},e.title))}),(0,a.jsx)("div",{className:"mt-4 p-3 rounded-lg bg-terminal-green/5 border border-terminal-green/20",children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4 text-terminal-green mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-terminal-green font-medium",children:"Zero-Knowledge Privacy"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"All cryptographic operations happen locally in your browser. No private keys or view keys are transmitted."})]})]})}),(0,a.jsxs)("a",{href:"https://www.getmonero.org/resources/developer-guides/",target:"_blank",rel:"noopener noreferrer",className:"mt-4 flex items-center justify-center gap-2 p-2 rounded-lg bg-obsidian-800/50 border border-obsidian-700 hover:border-monero-orange/30 transition-colors text-sm text-gray-400 hover:text-white",children:[(0,a.jsx)("span",{children:"Learn about Monero Privacy"}),(0,a.jsx)(Z.Z,{className:"w-4 h-4"})]})]})}var H=s(7306),J=s(2851),W=s(7335);function Y(){let[e,t]=(0,n.useState)(!1),[s,o]=(0,n.useState)(!1),c=(0,W.useMoneroWASM)(),{walletState:d}=(0,f.X$)();(0,n.useEffect)(()=>{let e=setTimeout(()=>{c.isLoading=!1,c.isLoaded=!0},2e3);return()=>clearTimeout(e)},[]);let m=y.ck.length,x=y.Gw.filter(e=>"XMR"!==e.type).length;return(0,a.jsxs)("div",{className:"min-h-screen flex flex-col relative overflow-hidden",children:[(0,a.jsx)("div",{className:"scanline-overlay"}),(0,a.jsx)(l.Z,{onConnectWallet:()=>t(!0),walletConnected:d.isConnected,walletAddress:d.address,walletProvider:d.provider}),(0,a.jsxs)("main",{className:"flex-1 flex flex-col items-center justify-center p-4 sm:p-6 lg:p-8 relative z-10",children:[(0,a.jsxs)(r.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-8",children:[(0,a.jsxs)("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-bold mb-4",children:[(0,a.jsx)("span",{className:"text-gradient",children:"MoneroSwap"}),(0,a.jsx)("span",{className:"text-gray-500 mx-3",children:"|"}),(0,a.jsx)("span",{className:"text-white font-mono",children:"Privacy"})]}),(0,a.jsxs)("p",{className:"text-gray-400 text-lg max-w-2xl mx-auto",children:["Cross-chain atomic swaps with complete privacy protection.",(0,a.jsx)("br",{}),(0,a.jsx)("span",{className:"terminal-text text-sm",children:"Zero-Knowledge Proofs + Ring Signatures + Stealth Addresses"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-6 mt-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"text-monero-orange font-mono text-lg font-bold",children:[m,"+"]}),(0,a.jsx)("span",{className:"text-gray-500 text-sm",children:"Tokens"})]}),(0,a.jsx)("div",{className:"w-1 h-8 bg-obsidian-800"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-monero-orange font-mono text-lg font-bold",children:x}),(0,a.jsx)("span",{className:"text-gray-500 text-sm",children:"Chains"})]}),(0,a.jsx)("div",{className:"w-1 h-8 bg-obsidian-800"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-monero-orange font-mono text-lg font-bold",children:"0"}),(0,a.jsx)("span",{className:"text-gray-500 text-sm",children:"KYC Required"})]})]})]}),(0,a.jsxs)("div",{className:"w-full max-w-4xl flex flex-col lg:flex-row gap-6",children:[(0,a.jsx)(r.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.2},className:"flex-1",children:(0,a.jsx)(U,{onVisualizing:e=>o(e)})}),(0,a.jsx)(r.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.4},className:"lg:w-80 flex-shrink-0",children:(0,a.jsx)(i.M,{mode:"wait",children:s?(0,a.jsx)(z,{},"visualizer"):(0,a.jsx)(D,{},"info")})})]}),(0,a.jsx)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},className:"mt-8 w-full max-w-4xl",children:(0,a.jsx)("div",{className:"card p-4",children:(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(c.isLoaded?"bg-terminal-green animate-pulse":"bg-terminal-yellow")}),(0,a.jsxs)("span",{className:"terminal-text-dim",children:["WASM: ",c.isLoading?"Loading...":"Ready"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-terminal-green animate-pulse"}),(0,a.jsx)("span",{className:"terminal-text-dim",children:d.provider?"".concat(d.provider," Connected"):"Wallet: Not Connected"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("span",{className:"terminal-text-dim",children:"Supported: ETH, SOL, XMR, USDC, USDT, DAI, and more"}),(0,a.jsx)("span",{className:"terminal-text-dim",children:"Last updated: 2s ago"})]})]})})})]}),(0,a.jsx)(H.Z,{}),(0,a.jsx)(i.M,{children:e&&(0,a.jsx)(J.Z,{onClose:()=>t(!1)})})]})}},2177:function(e,t,s){"use strict";s.d(t,{E:function(){return i}});let a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJwYnRna3VucmR6Y295ZmRoc2toIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI5MjAzNzUsImV4cCI6MjA3ODQ5NjM3NX0.ZAtjUoDnIWUOs6Os1NUGKIRUQVOuXDlaCJ4HwQqZu50",n={"Content-Type":"application/json",Authorization:"Bearer ".concat(a),apikey:a};class r{async createTransaction(e){try{let t=await fetch("".concat(this.baseUrl,"/functions/v1/swap-transactions"),{method:"POST",headers:n,body:JSON.stringify(e)});if(!t.ok)return console.error("API Error:",t.status,await t.text()),null;let s=await t.json();return s.data||s}catch(e){return console.error("Failed to create transaction:",e),null}}async getTransactions(e){try{let t=e?"".concat(this.baseUrl,"/functions/v1/swap-transactions?address=").concat(encodeURIComponent(e)):"".concat(this.baseUrl,"/functions/v1/swap-transactions"),s=await fetch(t,{method:"GET",headers:n});if(!s.ok)return console.error("API Error:",s.status,await s.text()),[];let a=await s.json();return a.data||a||[]}catch(e){return console.error("Failed to fetch transactions:",e),[]}}async updateTransactionStatus(e,t,s){try{return(await fetch("".concat(this.baseUrl,"/functions/v1/swap-transactions"),{method:"PATCH",headers:n,body:JSON.stringify({id:e,status:t,txHash:s})})).ok}catch(e){return console.error("Failed to update transaction:",e),!1}}async getExchangeRate(e,t){try{let s=await fetch("".concat(this.baseUrl,"/functions/v1/swap-rates?from=").concat(encodeURIComponent(e),"&to=").concat(encodeURIComponent(t)),{method:"GET",headers:n});if(!s.ok)return console.error("API Error:",s.status,await s.text()),null;let a=await s.json();return a.data||a}catch(e){return console.error("Failed to fetch exchange rate:",e),null}}constructor(){this.baseUrl="https://bpbtgkunrdzcoyfdhskh.supabase.co"}}let i=new r},8092:function(e,t,s){"use strict";s.d(t,{Y:function(){return o}});var a=s(7527),n=s(8105),r=s(2177);let i=()=>"tx_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),l=()=>new Date().toISOString().replace("T"," ").substring(0,16),o=(0,a.Ue)()((0,n.tJ)((e,t)=>({transactions:[],isLoading:!1,lastSyncedAddress:null,addTransaction:async(t,s)=>{let a=i(),n=l(),o={...t,id:a,date:n};e(e=>({transactions:[o,...e.transactions]}));try{let n={fromToken:t.fromToken,toToken:t.toToken,fromAmount:t.fromAmount,toAmount:t.toAmount,status:t.status,txHash:t.txHash,walletAddress:s},i=await r.E.createTransaction(n);if(i)return e(e=>({transactions:e.transactions.map(e=>e.id===a?{...e,id:i.id}:e)})),i.id}catch(e){console.error("Failed to sync transaction to server, keeping local:",e)}return a},updateTransactionStatus:async(t,s,a)=>{e(e=>({transactions:e.transactions.map(e=>e.id===t?{...e,status:s,txHash:a||e.txHash}:e)}));try{await r.E.updateTransactionStatus(t,s,a)}catch(e){console.error("Failed to sync status update to server:",e)}},clearHistory:()=>{e({transactions:[],lastSyncedAddress:null})},fetchTransactions:async s=>{e({isLoading:!0});try{let a=await r.E.getTransactions(s);if(a.length>0){let n=t().transactions,r=new Set(a.map(e=>e.id)),i=n.filter(e=>!r.has(e.id)&&e.id.startsWith("tx_"));e({transactions:[...i,...a],lastSyncedAddress:s||null})}}catch(e){console.error("Failed to fetch transactions from server:",e)}finally{e({isLoading:!1})}}}),{name:"moneroswap-transactions"}))}},function(e){e.O(0,[567,528,434,529,338,555,883,744],function(){return e(e.s=5382)}),_N_E=e.O()}]);